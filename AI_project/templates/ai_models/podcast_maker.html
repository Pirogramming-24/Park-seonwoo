{% extends 'ai_models/base.html' %}

{% block title %}팟캐스트 메이커{% endblock %}

{% block content %}
<h2>팟캐스트 메이커</h2>
<p>음성 파일을 업로드하면 텍스트 변환, 요약, 이미지 프롬프트를 생성합니다.</p>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
        <label for="audio">음성 파일 (MP3, WAV, M4A)</label>
        <input type="file" id="audio" name="audio" accept="audio/*" required>
    </div>
    
    <button type="submit" class="btn">실행</button>
    <div class="loading">처리 중... (변환 → 요약 → 생성)</div>
</form>

{% if transcript or summary or prompt %}
<div class="result-container">
    {% if transcript %}
    <div>
        <h3>1. 전체 텍스트</h3>
        <div class="box scroll">{{ transcript }}</div>
    </div>
    {% endif %}
    
    {% if summary %}
    <div>
        <h3>2. 핵심 요약</h3>
        <div class="box">{{ summary }}</div>
    </div>
    {% endif %}
    
    {% if prompt %}
    <div>
        <h3>3. 이미지 프롬프트</h3>
        <div class="box">{{ prompt }}</div>
    </div>
    {% endif %}
</div>
{% endif %}

<div class="info">
    <h4>파이프라인 구조</h4>
    <ul>
        <li>Whisper: 음성 텍스트 변환</li>
        <li>BART: 내용 요약</li>
        <li>GPT-2: 프롬프트 생성</li>
    </ul>
</div>

<style>
    .form-group { margin-bottom: 10px; }
    label { display: block; font-weight: bold; font-size: 14px; }
    input[type="file"] { border: 1px solid #000; width: 100%; padding: 5px; margin-top: 5px; }
    .btn { background: #000; color: #fff; border: 0; padding: 8px 20px; cursor: pointer; margin-top: 10px; }
    .loading { display: none; margin-top: 10px; font-size: 13px; }
    
    .result-container { margin-top: 30px; border-top: 2px solid #000; padding-top: 20px; }
    h3 { font-size: 16px; margin: 0 0 5px 0; }
    .box { border: 1px solid #000; padding: 10px; margin-bottom: 20px; font-size: 13px; white-space: pre-wrap; background: #fff; }
    .scroll { max-height: 150px; overflow-y: auto; background: #f9f9f9; }
    
    .info { margin-top: 30px; font-size: 12px; border-top: 1px solid #000; padding-top: 10px; }
    .info ul { padding-left: 20px; margin-top: 5px; }
</style>
{% endblock %}