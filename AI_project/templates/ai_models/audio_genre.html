{% extends 'ai_models/base.html' %}

{% block title %}ìŒì•… ì¥ë¥´ ë¶„ë¥˜ - AI Studio{% endblock %}

{% block content %}
<h2>ğŸµ ìŒì•… ì¥ë¥´ ë¶„ë¥˜</h2>
<p style="text-align: center; color: #666; margin-bottom: 30px;">
    ìŒì•… íŒŒì¼ì„ ì—…ë¡œë“œí•˜ë©´ AIê°€ ìë™ìœ¼ë¡œ ì¥ë¥´ë¥¼ ë¶„ì„í•©ë‹ˆë‹¤
</p>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    
    <div class="form-group">
        <label for="audio">ìŒì•… íŒŒì¼ ì„ íƒ (MP3, WAV, M4A)</label>
        <input type="file" id="audio" name="audio" accept="audio/*" required>
    </div>
    
    <div style="text-align: center;">
        <button type="submit" class="btn">ğŸš€ ì¥ë¥´ ë¶„ì„í•˜ê¸°</button>
    </div>
    
    <div class="loading">â³ AIê°€ ìŒì•…ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</div>
</form>

{% if result %}
<div class="result-box">
    <h3 style="margin-bottom: 20px;">ğŸ¼ ë¶„ì„ ê²°ê³¼</h3>
    
    {% for item in result|slice:":5" %}
    <div style="margin-bottom: 15px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
            <span style="font-weight: bold; color: #333;">{{ item.label }}</span>
            <span style="color: #667eea; font-weight: bold;">{{ item.score|floatformat:2 }}%</span>
        </div>
        <div style="background: #f0f0f0; height: 10px; border-radius: 5px; overflow: hidden;">
            <div style="background: linear-gradient(90deg, #667eea, #764ba2); height: 100%; width: {{ item.score|floatformat:0 }}%; transition: width 0.5s;"></div>
        </div>
    </div>
    {% endfor %}
</div>
{% endif %}

<div style="margin-top: 40px; padding: 20px; background: #f3e5f5; border-radius: 10px;">
    <h4 style="color: #7b1fa2; margin-bottom: 10px;">ğŸ’¡ ì‚¬ìš© íŒ</h4>
    <ul style="color: #555; line-height: 1.8;">
        <li>ë‹¤ì–‘í•œ ì•…ê¸°ì™€ ë³´ì»¬ì´ í¬í•¨ëœ ìŒì•…ì¼ìˆ˜ë¡ ì •í™•í•©ë‹ˆë‹¤</li>
        <li>Rock, Jazz, Classical, Electronic ë“± ë‹¤ì–‘í•œ ì¥ë¥´ ì¸ì‹</li>
        <li>ëª¨ë¸: MIT Audio Spectrogram Transformer</li>
        <li>íŒŒì¼ ê¸¸ì´: 10ì´ˆ ì´ìƒ ê¶Œì¥</li>
    </ul>
</div>
{% endblock %}

{% block extra_js %}
<script>
// í¼ì„¼íŠ¸ ë³€í™˜
document.addEventListener('DOMContentLoaded', function() {
    const scores = document.querySelectorAll('.result-box span[style*="color: #667eea"]');
    scores.forEach(score => {
        const value = parseFloat(score.textContent);
        score.textContent = (value * 100).toFixed(1) + '%';
    });
});
</script>
{% endblock %}