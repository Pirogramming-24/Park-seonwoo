{% extends 'base.html' %}

{% block content %}
<style>
    .detail-container {
        max-width: 935px;
        margin: 0 auto;
    }
    .post-detail {
        display: grid;
        grid-template-columns: 1fr 335px;
        background: white;
        border: 1px solid #dbdbdb;
        border-radius: 8px;
        overflow: hidden;
    }
    .post-image-section {
        background: #000;
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .post-image-section img {
        max-width: 100%;
        max-height: 600px;
        object-fit: contain;
    }
    .post-info-section {
        display: flex;
        flex-direction: column;
        max-height: 600px;
    }
    .post-header {
        padding: 16px;
        border-bottom: 1px solid #efefef;
        display: flex;
        align-items: center;
        gap: 12px;
    }
    .post-header img {
        width: 32px;
        height: 32px;
        border-radius: 50%;
    }
    .comments-section {
        flex: 1;
        overflow-y: auto;
        padding: 16px;
    }
    .comment-item {
        margin-bottom: 16px;
        font-size: 14px;
    }
    .comment-item strong {
        font-weight: 600;
        margin-right: 8px;
    }
    .post-actions-section {
        border-top: 1px solid #efefef;
        padding: 12px 16px;
    }
    .comment-form {
        border-top: 1px solid #efefef;
        padding: 16px;
    }
    .comment-form input {
        border: none;
        background: none;
        width: 100%;
        margin: 0;
    }
    @media (max-width: 768px) {
        .post-detail {
            grid-template-columns: 1fr;
        }
        .post-info-section {
            max-height: none;
        }
    }
</style>

<div class="detail-container">
    <a href="{% url 'posts:list' %}" style="display: inline-block; margin-bottom: 20px; font-size: 14px;">‚Üê ÌîºÎìúÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</a>
    
    <div class="post-detail">
        <div class="post-image-section">
            {% if post.image %}
            <img src="{{ post.image.url }}" alt="Í≤åÏãúÍ∏Ä Ïù¥ÎØ∏ÏßÄ">
            {% endif %}
        </div>
        
        <div class="post-info-section">
            <div class="post-header">
                <a href="{% url 'users:profile' post.author.username %}">
                    {% if post.author.profile_image %}
                    <img src="{{ post.author.profile_image.url }}" alt="{{ post.author.username }}">
                    {% else %}
                    <div style="width: 32px; height: 32px; border-radius: 50%; background: #dbdbdb;"></div>
                    {% endif %}
                </a>
                <a href="{% url 'users:profile' post.author.username %}" style="color: #262626;">
                    <strong style="font-size: 14px;">{{ post.author.username }}</strong>
                </a>
                
                {% if post.author == user %}
                <div style="margin-left: auto; display: flex; gap: 8px;">
                    <a href="{% url 'posts:update' post.pk %}" style="font-size: 12px;">ÏàòÏ†ï</a>
                    <a href="{% url 'posts:delete' post.pk %}" onclick="return confirm('ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')" style="font-size: 12px; color: #ed4956;">ÏÇ≠Ï†ú</a>
                </div>
                {% endif %}
            </div>
            
            <div class="comments-section">
                <div class="comment-item" style="margin-bottom: 24px;">
                    <strong>{{ post.author.username }}</strong>
                    {{ post.content }}
                </div>
                
                {% for comment in comments %}
                <div class="comment-item">
                    <strong>{{ comment.author.username }}</strong>
                    {{ comment.content }}
                    {% if comment.author == user %}
                    <a href="{% url 'posts:comment_delete' comment.pk %}" onclick="return confirm('ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')" style="font-size: 12px; color: #8e8e8e; margin-left: 8px;">ÏÇ≠Ï†ú</a>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
            
            <div class="post-actions-section">
                <div style="margin-bottom: 8px;">
                    <a href="{% url 'posts:like' post.pk %}">
                        <button style="background: none; padding: 0; font-size: 24px;">
                            {% if user in post.likes.all %}‚ù§Ô∏è{% else %}ü§ç{% endif %}
                        </button>
                    </a>
                </div>
                <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px;">
                    Ï¢ãÏïÑÏöî {{ post.likes_count }}Í∞ú
                </div>
                <div style="font-size: 12px; color: #8e8e8e;">
                    {{ post.created_at|date:"YÎÖÑ mÏõî dÏùº" }}
                </div>
            </div>
            
            <form method="post" action="{% url 'posts:comment_create' post.pk %}" class="comment-form">
                {% csrf_token %}
                <input type="text" name="content" placeholder="ÎåìÍ∏Ä Îã¨Í∏∞..." required>
            </form>
        </div>
    </div>
</div>
{% endblock %}