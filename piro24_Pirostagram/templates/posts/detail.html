{% extends 'base.html' %}

{% block content %}
<div style="border: 1px solid #dbdbdb; background: white; padding: 20px;">
    <div>
        <strong><a href="{% url 'users:profile' post.author.username %}">{{ post.author.username }}</a></strong>
    </div>
    
    {% if post.image %}
    <img src="{{ post.image.url }}" style="width: 100%; max-width: 600px; margin: 10px 0;">
    {% endif %}
    
    <div style="margin: 10px 0;">
        <a href="{% url 'posts:like' post.pk %}">
            {% if user in post.likes.all %}â¤ï¸{% else %}ğŸ¤{% endif %}
        </a>
        <strong>ì¢‹ì•„ìš” {{ post.likes_count }}ê°œ</strong>
    </div>
    
    <p><strong>{{ post.author.username }}</strong> {{ post.content }}</p>
    
    {% if post.author == user %}
    <div style="margin: 10px 0;">
        <a href="{% url 'posts:update' post.pk %}">ìˆ˜ì •</a>
        <a href="{% url 'posts:delete' post.pk %}" onclick="return confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</a>
    </div>
    {% endif %}
    
    <hr style="margin: 20px 0;">
    
    <h3>ëŒ“ê¸€ {{ comments.count }}ê°œ</h3>
    
    {% for comment in comments %}
    <div style="margin: 10px 0; padding: 10px; border-bottom: 1px solid #efefef;">
        <strong>{{ comment.author.username }}</strong> {{ comment.content }}
        {% if comment.author == user %}
        <a href="{% url 'posts:comment_delete' comment.pk %}" onclick="return confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</a>
        {% endif %}
    </div>
    {% endfor %}
    
    <form method="post" action="{% url 'posts:comment_create' post.pk %}" style="margin-top: 20px;">
        {% csrf_token %}
        {{ comment_form.as_p }}
        <button type="submit">ëŒ“ê¸€ ë‹¬ê¸°</button>
    </form>
</div>

<a href="{% url 'posts:list' %}">â† í”¼ë“œë¡œ ëŒì•„ê°€ê¸°</a>
{% endblock %}